<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIRMAN MAZDOOR SANGHA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('https://i.ibb.co/H2M5rWg/7d6ad625daf213313845c8068041908f.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            padding: 20px;
        }
        header {
            background-color: #004d80;
            color: white;
            padding: 20px;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 32px;
        }
        #search-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        select, input[type="text"], button {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }
        button {
            background-color: #004d80;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #00375f;
        }
        .work-header {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: white;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        th {
            background-color: #004d80;
            color: white;
        }
        .call-button {
            background-color: #28a745;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .call-button:hover {
            background-color: #218838;
        }
        .action-buttons {
            text-align: center;
            margin-top: 20px;
        }
        .action-buttons button {
            width: 200px;
            margin: 10px;
            font-size: 1em;
        }
        .register-button {
            background-color: #ff5722;
            color: white;
            font-weight: bold;
        }
        .register-button:hover {
            background-color: #e64a19;
        }
        .login-button {
            background-color: #2196f3;
            color: white;
        }
        .login-button:hover {
            background-color: #1976d2;
        }
        .labor-card-button {
            background-color: #4CAF50;
            color: white;
        }
        .labor-card-button:hover {
            background-color: #45a049;
        }
        .share-button {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background-color: #ff5722;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        .share-button i {
            color: white;
            font-size: 20px;
        }
        .share-link {
            position: fixed;
            top: 20px;
            right: 70px;
            background-color: #ff5722;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .share-link.show {
            opacity: 1;
            visibility: visible;
        }
        .marquee {
            width: 100%;
            height: 40px;
            overflow: hidden;
            position: relative;
            background-color: #ff5722;
            color: white;
            line-height: 40px;
            white-space: nowrap;
        }
        .marquee span {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 10s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        @media screen and (max-width: 768px) {
            table {
                font-size: 14px;
            }
            th, td {
                padding: 8px;
            }
            button {
                font-size: 14px;
                padding: 5px;
            }
            header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>NIRMAN MAZDOOR SANGHA</h1>
        <p>Workers Search</p>
    </header>
    <div class="marquee">
        <span>NIRMAN MAZDOOR SANGHA Official Website is a platform connecting workers and employers. Workers can register and showcase their skills, while employers can easily find workers based on pin codes and job types (e.g., plumber, electrician, carpenter). If anyone wants to apply for a labour card, they can contact us directly through the website.</span>
    </div>
    <div id="search-container">
        <select id="search-work">
            <option value="">Select Work Type</option>
            <option value="Mason">Mason</option>
            <option value="Carpenter">Carpenter</option>
            <option value="Electrician">Electrician</option>
            <option value="Painter">Painter</option>
            <option value="Plumber">Plumber</option>
            <option value="Welder">Welder</option>
            <option value="Contractor">Contractor</option>
            <option value="Gardener">Gardener</option>
            <option value="Driver">Driver</option>
            <option value="Tiler">Tiler</option>
            <option value="Plasterer">Plasterer</option>
            <option value="Cook">Cook</option>
        </select>
        <input type="text" id="search-pincode" placeholder="Enter Pin Code (Optional)" />
        <button onclick="searchWorkers()">Search</button>
    </div>
    <div class="work-header" id="work-header"></div>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Address</th>
                <th>Pin Code</th>
                <th>Call</th>
            </tr>
        </thead>
        <tbody id="search-results">
            <!-- Search results will appear here -->
        </tbody>
    </table>

    <div class="action-buttons">
        <button class="register-button" onclick="location.href='https://thedigitsync.blogspot.com/p/new-worker-registration.html'">Worker Registration<br>শ্ৰমিক পঞ্জীয়ন</button>
        <button class="login-button" onclick="location.href='https://thedigitsync.blogspot.com/p/worker-login.html'">Worker Login</button>
        <button class="labor-card-button" onclick="window.open('https://api.whatsapp.com/send?phone=7399490650&text=প্ৰেশ্ন: মোৰ লেবার কাৰ্ড বনাবলৈ অনুগ্ৰহ কৰি মোক কল কৰক।')">Labour Card<br>শ্ৰমিক কাৰ্ড</button>
    </div>

    <div class="share-button">
        <i class="fas fa-share-alt"></i>
    </div>
    <a href="https://digitsync.github.io/Nirman-Mazdoor-Sangh/" class="share-link">Share</a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB-JxVp3xfNPpJf5P5tNUgE3klG8e5sPbE",
            authDomain: "nirman-mazdur-sangha.firebaseapp.com",
            databaseURL: "https://nirman-mazdur-sangha-default-rtdb.firebaseio.com",
            projectId: "nirman-mazdur-sangha",
            storageBucket: "nirman-mazdur-sangha.appspot.com",
            messagingSenderId: "620359948544",
            appId: "1:620359948544:web:45e5d58b9bc35d3d797be5",
            measurementId: "G-YF95894JSJ"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        const searchResults = document.getElementById('search-results');
        const workHeader = document.getElementById('work-header');

        // Search workers
        window.searchWorkers = function () {
            const workType = document.getElementById('search-work').value.trim();
            const pinCode = document.getElementById('search-pincode').value.trim();

            if (!workType) {
                alert("Please select a work type to search.");
                return;
            }

            workHeader.textContent = `Showing results for: ${workType}`;
            const workersRef = ref(database, 'workers');
            onValue(workersRef, (snapshot) => {
                const data = snapshot.val();
                searchResults.innerHTML = '';

                for (const id in data) {
                    const worker = data[id];
                    const matchesWork = worker.work.toLowerCase() === workType.toLowerCase() || !workType;
                    const matchesPin = pinCode ? worker.pincode === pinCode : true;

                    if (matchesWork && matchesPin) {
                        const row = `
                            <tr>
                                <td>${worker.name}</td>
                                <td>${worker.address}</td>
                                <td>${worker.pincode}</td>
                                <td><button class="call-button" onclick="makeCall('${worker.phone}')">Call</button></td>
                            </tr>
                        `;
                        searchResults.innerHTML += row;
                    }
                }

                if (searchResults.innerHTML === '') {
                    searchResults.innerHTML = '<tr><td colspan="4">No workers found matching the criteria.</td></tr>';
                }
            });
        };

        // Make a call
        window.makeCall = function (phone) {
            window.open(`tel:${phone}`, '_self');
        };

        // Share button and link
        const shareButton = document.querySelector('.share-button');
        const shareLink = document.querySelector('.share-link');

        shareButton.addEventListener('click', () => {
            shareLink.classList.toggle('show');
        });
    </script>
</body>
</html>